FROM node:20-alpine

WORKDIR /app

# Install dependencies
COPY package.json package-lock.json* pnpm-lock.yaml* yarn.lock* ./
RUN npm install

# Copy frontend source (used for initial build; in dev we mount volumes)
COPY src ./src
COPY public ./public
COPY vite.config.ts tsconfig.app.json tsconfig.json ./

ENV NODE_ENV=development
ENV VITE_BACKEND_URL="http://localhost:5000"

EXPOSE 9000

CMD ["npm", "run", "dev"]
